(this.webpackJsonpshogi=this.webpackJsonpshogi||[]).push([[0],{14:function(e,n,i){e.exports={name:"Name_name__GbJQ_",active:"Name_active__2a4Et",upsideDown:"Name_upsideDown__2VXDn"}},19:function(e,n,i){e.exports={game:"Game_game___e9Nk",container:"Game_container__tbffW"}},26:function(e,n,i){},33:function(e,n,i){},34:function(e,n,i){"use strict";i.r(n);var t,a=i(1),c=i(0),u=i.n(c),r=i(11),o=i.n(r),l=(i(26),i(2)),s=i(6);!function(e){e[e.Oh=0]="Oh",e[e.Gyoku=1]="Gyoku",e[e.Hisha=2]="Hisha",e[e.Kaku=3]="Kaku",e[e.Kin=4]="Kin",e[e.Gin=5]="Gin",e[e.Keima=6]="Keima",e[e.Kyohsha=7]="Kyohsha",e[e.Hu=8]="Hu",e[e.Ryuuoh=9]="Ryuuoh",e[e.Ryuuma=10]="Ryuuma",e[e.Narigin=11]="Narigin",e[e.Narikei=12]="Narikei",e[e.Narikyoh=13]="Narikyoh",e[e.Tokin=14]="Tokin"}(t||(t={}));var d=[],h=function(e){return d.find((function(n){return n.id===e}))||null},p=1,b=function(e,n){var i={id:p++,type:e,ownerId:n.id,changeOwner:function(e){this.ownerId=e.id},nari:function(){this.type===t.Hisha&&(this.type=t.Ryuuoh),this.type===t.Kaku&&(this.type=t.Ryuuma),this.type===t.Gin&&(this.type=t.Narigin),this.type===t.Keima&&(this.type=t.Narikei),this.type===t.Kyohsha&&(this.type=t.Narikyoh),this.type===t.Hu&&(this.type=t.Tokin)},omote:function(){this.type===t.Ryuuoh&&(this.type=t.Hisha),this.type===t.Ryuuma&&(this.type=t.Kaku),this.type===t.Narigin&&(this.type=t.Gin),this.type===t.Narikei&&(this.type=t.Keima),this.type===t.Narikyoh&&(this.type=t.Kyohsha),this.type===t.Tokin&&(this.type=t.Hu)},toString:function(){switch(this.type){case t.Oh:return"\u738b";case t.Gyoku:return"\u7389";case t.Hisha:return"\u98db";case t.Kaku:return"\u89d2";case t.Kin:return"\u91d1";case t.Gin:return"\u9280";case t.Keima:return"\u6842";case t.Kyohsha:return"\u9999";case t.Hu:return"\u6b69";case t.Ryuuoh:return"\u7adc";case t.Ryuuma:return"\u99ac";case t.Narigin:return"\u5168";case t.Narikei:return"\u572d";case t.Narikyoh:return"\u674f";case t.Tokin:return"\u3068";default:return""}}};return d.push(i),i},j=function(e){return[e%O,Math.floor(e/O)]},y=function(e){var n=Object(s.a)(e,2),i=n[0],t=n[1];return i+O*t},f=function(e,n){var i=Object(s.a)(e,2),t=i[0],a=i[1],c=Object(s.a)(n,2),u=c[0],r=c[1];return t===u&&a===r},O=9,k={id:1,name:"Player1"},m={id:2,name:"Player2"},v=function(e,n,i){var a=h(e);if(null===a)return[];var c=n.indexOf(e),u=j(c),r=Object(s.a)(u,2),o=r[0],d=r[1],p=function(e){var i=y(e);return null!==n[i]},b=function(e){for(var n=Object(s.a)(e,2),i=n[0],t=n[1],a=[],c=0;c<8;c++){var u=[o+i*(c+1),d+t*(c+1)];if(u[0]<0||u[0]>8||u[1]<0||u[1]>8)break;if(a=[].concat(Object(l.a)(a),[u]),p(u))break}return a},f=[];switch(a.type){case t.Oh:case t.Gyoku:f=[[o,d+1],[o,d-1],[o+1,d],[o-1,d],[o+1,d+1],[o-1,d-1],[o+1,d-1],[o-1,d+1]];break;case t.Kin:case t.Narigin:case t.Narikei:case t.Narikyoh:case t.Tokin:f=i?[[o,d+1],[o+1,d+1],[o-1,d+1],[o-1,d],[o+1,d],[o,d-1]]:[[o,d-1],[o+1,d-1],[o-1,d-1],[o-1,d],[o+1,d],[o,d+1]];break;case t.Gin:f=i?[[o,d+1],[o+1,d+1],[o-1,d+1],[o-1,d-1],[o+1,d-1]]:[[o,d-1],[o+1,d-1],[o-1,d-1],[o-1,d+1],[o+1,d+1]];break;case t.Keima:f=i?[[o-1,d+2],[o+1,d+2]]:[[o-1,d-2],[o+1,d-2]];break;case t.Kyohsha:f=b(i?[0,1]:[0,-1]);break;case t.Hu:f=i?[[o,d+1]]:[[o,d-1]];break;case t.Hisha:f=[].concat(Object(l.a)(b([1,0])),Object(l.a)(b([-1,0])),Object(l.a)(b([0,1])),Object(l.a)(b([0,-1])));break;case t.Kaku:f=[].concat(Object(l.a)(b([1,1])),Object(l.a)(b([-1,-1])),Object(l.a)(b([1,-1])),Object(l.a)(b([-1,1])));break;case t.Ryuuoh:f=[].concat(Object(l.a)(b([1,0])),Object(l.a)(b([-1,0])),Object(l.a)(b([0,1])),Object(l.a)(b([0,-1])),[[o+1,d+1],[o-1,d+1],[o+1,d-1],[o-1,d-1]]);break;case t.Ryuuma:f=[].concat(Object(l.a)(b([1,1])),Object(l.a)(b([-1,-1])),Object(l.a)(b([1,-1])),Object(l.a)(b([-1,1])),[[o,d+1],[o,d-1],[o+1,d],[o-1,d]])}return f=f.filter((function(e){var i;return(null===(i=function(e){var i=y(e),t=n[i];return null===t?null:h(t)}(e))||void 0===i?void 0:i.ownerId)!==a.ownerId}))},_=i(5),w=i(7),K=i.n(w),N=i(8),x=i.n(N),H=i(13),g={nextPlayer:k,board:[b(t.Kyohsha,m).id,b(t.Keima,m).id,b(t.Gin,m).id,b(t.Kin,m).id,b(t.Gyoku,m).id,b(t.Kin,m).id,b(t.Gin,m).id,b(t.Keima,m).id,b(t.Kyohsha,m).id,null,b(t.Hisha,m).id,null,null,null,null,null,b(t.Kaku,m).id,null,b(t.Hu,m).id,b(t.Hu,m).id,b(t.Hu,m).id,b(t.Hu,m).id,b(t.Hu,m).id,b(t.Hu,m).id,b(t.Hu,m).id,b(t.Hu,m).id,b(t.Hu,m).id,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,b(t.Hu,k).id,b(t.Hu,k).id,b(t.Hu,k).id,b(t.Hu,k).id,b(t.Hu,k).id,b(t.Hu,k).id,b(t.Hu,k).id,b(t.Hu,k).id,b(t.Hu,k).id,null,b(t.Kaku,k).id,null,null,null,null,null,b(t.Hisha,k).id,null,b(t.Kyohsha,k).id,b(t.Keima,k).id,b(t.Gin,k).id,b(t.Kin,k).id,b(t.Oh,k).id,b(t.Kin,k).id,b(t.Gin,k).id,b(t.Keima,k).id,b(t.Kyohsha,k).id],stocks:[],selectedPieceId:null},I=Object(H.b)({name:"board",initialState:g,reducers:{move:function(e,n){var i=n.payload,t=i.pieceId,a=i.position,c=e.nextPlayer,u=e.board,r=e.stocks,o=h(t);u.includes(o.id)&&(u[u.indexOf(o.id)]=null),r.includes(o.id)&&r.splice(r.indexOf(o.id),1);var l,s,d=y(a);null!==u[d]&&(null===(l=h(u[d]))||void 0===l||l.changeOwner(c),null===(s=h(u[d]))||void 0===s||s.omote(),r.push(u[d]),u[d]=null);u[d]=o.id,e.nextPlayer=c.id===k.id?m:k},selectPieceId:function(e,n){var i=n.payload.pieceId;e.selectedPieceId=i}}}),G=I.actions,D=G.move,C=G.selectPieceId,P=function(e){return e.game.nextPlayer},R=function(e){return e.game.board},S=function(e){return e.game.stocks},B=function(e){return e.game.selectedPieceId},T=I.reducer,A=i(3),E=function(e){var n,i,c=e.piece,u=e.position,r=e.isActive,o=e.isFocused,l=e.onClickCell;return Object(a.jsx)("div",{className:K()(x.a.cell,(n={},Object(_.a)(n,x.a.activeCell,r),Object(_.a)(n,x.a.focusedCell,o),n)),onClick:function(){return l(u,c,r)},children:null!==c&&Object(a.jsx)("div",{className:K()(x.a.piece,(i={},Object(_.a)(i,x.a.upsideDown,c.ownerId===m.id),Object(_.a)(i,x.a.nari,c.type===t.Narigin||c.type===t.Narikei||c.type===t.Narikyoh||c.type===t.Tokin||c.type===t.Ryuuoh||c.type===t.Ryuuma),i)),children:"".concat(c)})})},F=function(){var e=Object(A.b)(),n=Object(A.c)(R),i=Object(A.c)(B),c=Object(A.c)(P),u=null!==i?h(i):null,r=function(n){e(C({pieceId:(null===n||void 0===n?void 0:n.id)||null}))},o=null;null!==i&&n.includes(i)&&(o=j(n.indexOf(i)));var l,d=[];null!==i&&(d=n.includes(i)?v(i,n,(null===(l=h(i))||void 0===l?void 0:l.ownerId)===m.id):function(e){var n=[];return e.forEach((function(e,i){null===e&&n.push(j(i))})),n}(n));return Object(a.jsx)("div",{className:x.a.board,children:n.map((function(i,l){return Object(a.jsx)(E,{position:j(l),piece:null!==i?h(i):null,isActive:(p=j(l),b=d,b.filter((function(e){return f(e,p)})).length>0),isFocused:null!==o&&f(j(l),o),onClickCell:function(i,a,o){null!==u?(o&&(function(n,i){e(D({pieceId:n.id,position:i}))}(u,i),function(e,n,i,a,c){var u;switch(e.type){case t.Hisha:case t.Kaku:case t.Gin:case t.Keima:case t.Kyohsha:case t.Hu:var r=Object(s.a)(n,2)[1];u=(r<3&&!a||r>5&&a)&&i.includes(e.id);break;default:u=!1}u&&window.confirm("\u6210\u308a\u307e\u3059\u304b\uff1f")&&c()}(u,i,n,u.ownerId===m.id,(function(){u.nari()}))),r(null)):null!==a&&function(e){return e.ownerId===c.id}(a)&&r(a)}},l);var p,b}))})},W=i(14),J=i.n(W),X=function(e){var n,i=e.player,t=e.upsideDown,c=Object(A.c)(P);return Object(a.jsx)("div",{className:K()(J.a.name,(n={},Object(_.a)(n,J.a.upsideDown,t),Object(_.a)(n,J.a.active,c.id===i.id),n)),children:"".concat(i.name)})},q=i(9),z=i.n(q),M=function(e){var n=e.pieces,i=e.isFocused,t=e.onClick;return Object(a.jsxs)("div",{className:z.a.row,children:[Object(a.jsx)("div",{className:K()(z.a.piece,Object(_.a)({},z.a.focusedPiece,i)),onClick:function(){return t(n[0],i)},children:"".concat(n[0])}),"x".concat(n.length)]})},Q=function(e){var n,i,t=e.player,c=e.upsideDown,u=Object(A.b)(),r=Object(A.c)(S),o=Object(A.c)(B),l=Object(A.c)(P),d=r.map((function(e){return h(e)})).filter((function(e){return e.ownerId===t.id})),p=function(e){u(C({pieceId:(null===e||void 0===e?void 0:e.id)||null}))};return Object(a.jsx)("div",{className:K()(z.a.stock,Object(_.a)({},z.a.upsideDown,c)),children:(n=d,i=function(e){return e.type},n.reduce((function(e,n,t,a){var c=i(n,t,a),u=e.find((function(e){return Object(s.a)(e,1)[0]===c}));return u?Object(s.a)(u,2)[1].push(n):e.push([c,[n]]),e}),[]).map((function(e){return Object(s.a)(e,2)[1]}))).sort((function(e,n){return e[0].type-n[0].type})).map((function(e){return Object(a.jsx)(M,{pieces:e,isFocused:e.filter((function(e){return e.id===o})).length>0,onClick:function(e,n){!n&&function(e){return e.ownerId===l.id}(e)?p(e):p(null)}},e[0].type)}))})},V=i(19),Y=i.n(V),$=function(){return Object(a.jsxs)("div",{className:Y.a.game,children:[Object(a.jsx)(X,{player:m,upsideDown:!0}),Object(a.jsxs)("div",{className:Y.a.container,children:[Object(a.jsx)(Q,{player:m,upsideDown:!0}),Object(a.jsx)(F,{}),Object(a.jsx)(Q,{player:k,upsideDown:!1})]}),Object(a.jsx)(X,{player:k,upsideDown:!1})]})};i(33);var L=function(){return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("header",{className:"App-header",children:Object(a.jsx)("h1",{children:"Shogi"})}),Object(a.jsx)($,{})]})},U=Object(H.a)({reducer:{game:T}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(a.jsx)(u.a.StrictMode,{children:Object(a.jsx)(A.a,{store:U,children:Object(a.jsx)(L,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,n,i){e.exports={board:"Board_board__2NjSw",cell:"Board_cell__3urXG",activeCell:"Board_activeCell__24qA5",focusedCell:"Board_focusedCell__1hxiX",piece:"Board_piece__1gzEb",nari:"Board_nari__1Yqpn",upsideDown:"Board_upsideDown___tTD8"}},9:function(e,n,i){e.exports={stock:"Stock_stock__3bwT7",row:"Stock_row__1imNm",piece:"Stock_piece__22W17",focusedPiece:"Stock_focusedPiece__1h9dz",upsideDown:"Stock_upsideDown__3g496"}}},[[34,1,2]]]);
//# sourceMappingURL=main.21a25fd5.chunk.js.map